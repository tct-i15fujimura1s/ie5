# ネットワークアーキテクチャ 1/7

## ノイズ対策
* ノイズには
  * 電界ノイズと
  * 磁界ノイズがある

### 電界ノイズの対策
* 電力線が近くにあるようなとき、浮遊容量による結合で電界ノイズが入る
* 電界ノイズが入ると、そのケーブルの電位が変化する
* → 両方のケーブルにノイズが入るようにし、差動入力にすればノイズを打ち消せる
  * Rx+, Rx-の信号線の信号は Rx+ - Rx-
  * ノイズdが入った時、 (Rx+ + d) - (Rx- + d) = Rx+ - Rx-
  * CAT5
* ただし、ケーブル間の距離が重要
  * ケーブルA,Bのノイズ源との距離に差がある場合、片方にノイズが入りもう片方に入りにくくなる
  * 例えば、4対の信号線が入っているとき、周波数が高くなると隣の信号線対に影響しやすくなる
  * → ケーブル間の距離を離す (CAT6)
* さらに
  * シールド STP (CAT7)
  * GNDに接続したシールドで覆うと、電気的な結合はGNDを介することになる

### 磁界ノイズの対策
* 撚り

## レイヤ0

### ボックス型SWとシャーシ型SW
* ボックス型: ポート数、種別が固定、低額（〜100万円）
* シャーシ型: 色々なモジュール、多ポート、高額（100万円〜）

### 機器の大きさ、設置

#### 大きさ
* ラックの高さの単位: U (1U = 1.7inch = 4.4cm)
* 幅: どれも同じ
* 奥行き: 様々 (性能のいいサーバは奥行方向に長い)

#### 設置
* 正面からネジ止め or レールラック
* 設置する場所を考える
  * 目一杯詰め込むと配線が大変
* 見た目よりも重い
  * 基本は二人以上で作業
  * 一人でやると腰を痛めることがある
* 騒音が大きい (掃除機並みの冷却ファン)

### 電源の確保
* 単相100V? 単相200V? 3相200V?
  * 単相100Vでは足りない機器もある
* UPS (無停電電源装置) は必要?
  * 何分バックアップ? 方式? 出力?

### その他
* 切替手順の作成
* 停止アナウンス
* 動作確認方法の検討・手順書の作成
* これらはテクニカルエンジニア（ネットワーク）試験で出題される

## Ethernet
### ループは大敵
* IPと違いTTLが無いので無限に流れ続ける

### ブロードキャスト・ストーム
* 主にループが原因
* ARP要求を連発するようなホスト
* 資源・帯域を食いつぶす
* 最近はコリジョンドメインを分割できるので少々は大丈夫

### STP (スパニングツリープロトコル)
* ループを回避するプロトコル
* 基幹の中で二重化に用いられている
* 学習に時間がかかる
* 収束するのに30秒から数分
