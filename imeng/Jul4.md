---
mathjax: true
title: 画像工学 7/4
---

{% include mathjax.html %}

## 符号化方式の分類
* 可逆符号化
  * データを正確に復元できる
  * 圧縮率はよくない
* 非可逆符号化
  * ある程度正確に復元する
  * 圧縮率はいい

### 画像の種類と符号化
* 2値画像
  * ランレングス符号化
  * チェイン符号化
* 濃淡画像
  * 予測符号化
  * 変換符号化
* 動画像

### ランレングス符号化
`001111100011` → `02 15 03 12`

### チェイン符号化
線画像を画点の連なりに注目して記述する可逆符号化

ある画素を中心としてみた時、連結している画素は、その画素から方向コードで示す8方向のうちのいずれかに存在する。
ある画素から順に連結する画素をたどっていき、その方向コードを並べることにより線図形を描く画素さんビットで効率よく表現することができる。

方向コード： 右を0として、時計回りに7(右上)まで

```
........
.*......
..**....
*...***.
*......*
```

↓

```
{
  ((1, 1), [1, 0, 1, 0, 0, 1])
  ((0, 3), [2])
}
```

### 予測符号化
すでに複合化されわかっている周囲の画素値 $f(x,y)$ から注目画素の予測値 $g(x,y)$ を求め、その予測誤差 $E(x,y) = f(x,y) - g(x,y)$を符号化する。

予測精度が高ければ、予測誤差 $E$ は平均的に少ないビット数で符号化できるので、効率の良い圧縮が期待できる。

→ いかに予測精度を上げて誤差を小さくするかが符号化のポイントとなる。

予測値 $g$ を求める式を __予測関数__ という。

\[ g(t) = \frac {f(t-2) + f(t-1) } {2} \text{(1次元)} \] 

<pre>
..abc
.de<u>f</u>
</pre>

* <u>f</u>: 着目画素
* a, b, c, d, e: 参照画素
* g: 予測関数

#### 予測関数の例
* 前値予測: $g = e$
* 行列予測: $g = (b + e) / 2$
* 平面予測: $g = b + e - a$
* 平均予測: $g = (c + e) / 2$
* 傾斜予測: $g = 2e - d$

予測符号化は原理的には元の画像を完全に復元できる可逆符号化だが、符号化する予測誤差のビット数を制限して圧縮効率を高めた不可逆符号化としても用いることができる。また、２進画像にも適用できる。

### 変換符号化
画像データを２次元フーリエ変換で空間周波数領域に変換すると、その空間周波数スペクトルは低い周波数に集中する。

このような場合、全ての周波数成分を保存しなくても、低い周波数成分の係数だけを符号化すれば、有用な情報を保存しながら全体のデータ量を減らすことができる。

この様式は基本的には不可逆符号化であり、元の画像を完全には復元できない。

#### 直交変換による座標軸の回転
画像中で左右に隣する２つの画素 $x_i$ と $x_{i+1}$ を1つのブロックとして符号化する場合を考える。

隣接する画素の相関が高い場合、 $x_i - x_{i+1}$ 平面における画素値の分布は $x_i = x_{i+1}$ の直線近傍に集中する。

ここで座標軸を４５°回転した新しい座標系 $y_i, y_{i+1}$ を考えると、画素値の分布は $y_i$ 軸の近傍に集中し、 $y_{i+1}$ の分散が小さくなる。このため符号化するとき、 $y_i$ には $x_i$ や $x_{i+1}$ と同等のビット数が必要であるが、 $y_{i+1}$ はかなりビット数を減らすことができる。



